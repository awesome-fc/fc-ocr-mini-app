# 10分钟使用阿里云函数计算构建你的OCR智能识别小程序

本文介绍使用支付宝小程序与函数计算的完成OCR光学字符识别的例子，十分钟快速开发一个轻量级可扩展应用

## 介绍
- 函数计算
  - 阿里云函数计算是事件驱动的全托管计算服务，无需管理服务器等基础设施，只需编写代码并上传，函数计算会为您准备好计算资源，以弹性、可靠的方式运行您的代码

  - 借助函数计算和其他云端服务的集成，您只需要编写少量代码就可以串联多个服务完成复杂的功能，大大提高开发效率



- 优点与劣势

  - 应用可用性高：函数计算为用户准备弹性、可靠的计算资源，具有根据流量自动scale特性，对有明显波峰波谷的运用效果奇佳	

  - 节省系统资源、运维成本：函数计算的 Serverless 与云服务器最大的不同之处在于,云服务器需要一直运行，而函数计算是按需计算。按需计算就意味着，在请求到来的时候，才运行函数。没有请求的时候，是不耗费资源的

  - 函数计算是基于事件驱动的，适用于按照事件驱动的业务逻辑，比如数据处理与分析、消息应用等；但是函数计算是无状态的，这在某些场景下可能不适用


- 流程步骤：

    ![fc_ocr_flow](http://git.cn-hangzhou.oss-cdn.aliyun-inc.com/uploads/serverless/admin-service/2e6860df540d8e8e5e77f9e9e70b1cea/fc_ocr_flow.png)

    1. 在小程序客户端上传图片，`http trigger`触发`upload_ocr_image`函数，函数接收文件上传到OSS

    2. OSS存入新图片，将触发`process_image`函数，读取新加入的图片，并调用`Vision API`进行字符识别和提取

    3. 将识别结果存储回OSS

    4. 小程序客户端请求识别结果，`http trigger`触发`get_ocr_result`函数，得到结果


## 使用方法

1. 函数计算开发环境，使用[Fun工具](https://help.aliyun.com/document_detail/64204.html) 进行函数部署

2. OSS bucket创建，存储上传的图片，本demo需要创建两个bucket

3. 开启阿里云OCR服务: [通用类图片文字识别](https://ai.aliyun.com/ocr/general?spm=5176.182739.1280361.96.69111d8avKcFFG)

4. 替换python代码中的`<>`中的内容为你配置，然后`fun deploy`

5. 运行支付宝小程序client端，上传图片，得到识别结果

